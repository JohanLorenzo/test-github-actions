name: GitHub Actions Demo
on: [push]
jobs:
  Explore-GitHub-Actions:
    runs-on: ubuntu-20.04
    container:
      image: ubuntu:21.04
      volumes:
        - ${{ github.workspace }}:${{ github.workspace }}
    env:
      - PYTHON_TOOLS_HASH: ${{ hashFiles('**/docker/python-tools/**') }}
    steps:
      - name: Check out repository code
        uses: actions/checkout@v2
      - name: List files in the repository
        uses: docker://ubuntu
        with:
          entrypoint: ls
          args: -R /github/workspace
      - run: echo "$PYTHON_TOOLS_HASH"
      - name: Build docker image
        uses: docker://gcr.io/kaniko-project/executor
        with:
          args: "--dockerfile /github/workspace/docker/python-tools/Dockerfile --no-push"
      - run: echo "üçè This job's status is ${{ job.status }}."

name: GitHub Actions Demo
on: [push]
jobs:
  Explore-GitHub-Actions:
    runs-on: ubuntu-20.04
    container:
      image: ubuntu:21.04
      volumes:
        - ${{ github.workspace }}:${{ github.workspace }}
    steps:
      - name: Check out repository code
        uses: actions/checkout@v2
      - name: Set environment
        run: echo "python_tools_hash=${{ hashFiles('./docker/python-tools/**') }}" >> $GITHUB_ENV
      - name: List files in the repository
        uses: docker://ubuntu
        with:
          entrypoint: ls
          args: -R /github/workspace
      - run: echo "${{ env.python_tools_hash }}"
      - name: Build docker image
        uses: docker://gcr.io/kaniko-project/executor
        with:
          args: "--dockerfile /github/workspace/docker/python-tools/Dockerfile --no-push"
      - run: echo "üçè This job's status is ${{ job.status }}."
